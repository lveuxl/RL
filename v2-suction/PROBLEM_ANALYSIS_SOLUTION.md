# å¤šç¯å¢ƒç´¢å¼•é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ

## ğŸ” é—®é¢˜åˆ†æ

### 1. **åŸå§‹é—®é¢˜ç—‡çŠ¶**
```
ç¯å¢ƒ3: æ£€æµ‹æ¥è§¦å¤±è´¥: index 3 is out of bounds for dimension 0 with size 1
```

### 2. **æ ¹æœ¬åŸå› åˆ†æ**

#### **é—®é¢˜Aï¼šç´¢å¼•è¶Šç•Œ**
- **ç°è±¡**ï¼šå°è¯•è®¿é—®`tcp_pos[3]`æˆ–`obj_pos[3]`æ—¶ï¼Œå¼ é‡åªæœ‰1ä¸ªå…ƒç´ 
- **åŸå› **ï¼šåœ¨å¤šç¯å¢ƒåœºæ™¯ä¸­ï¼Œä¸åŒå¯¹è±¡çš„å¼ é‡ç»´åº¦ä¸ä¸€è‡´
  - TCPä½ç½®ï¼š`[num_envs, 3]` - æ¯ä¸ªç¯å¢ƒä¸€ä¸ªTCP
  - ç‰©ä½“ä½ç½®ï¼š`[1, 3]` - æ¯ä¸ªç‰©ä½“åªå±äºä¸€ä¸ªç¯å¢ƒ

#### **é—®é¢˜Bï¼šç›¸å¯¹å¯¼å…¥é”™è¯¯**
```
ImportError: attempted relative import with no known parent package
```
- **ç°è±¡**ï¼š`from .config import Config, get_config`å¯¼å…¥å¤±è´¥
- **åŸå› **ï¼šç›´æ¥è¿è¡Œè„šæœ¬æ—¶ï¼ŒPythonä¸çŸ¥é“åŒ…ç»“æ„

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### 1. **ç´¢å¼•è¶Šç•Œä¿®å¤**

#### **ä¿®å¤å‰ï¼ˆâŒï¼‰**ï¼š
```python
# ç®€å•ç²—æš´çš„ç´¢å¼•è®¿é—®
tcp_pos = self.agent.tcp.pose.p
if tcp_pos.dim() > 1:
    tcp_pos = tcp_pos[env_idx]  # å¯èƒ½è¶Šç•Œï¼

obj_pos = target_object.pose.p
if obj_pos.dim() > 1:
    obj_pos = obj_pos[env_idx]  # å¯èƒ½è¶Šç•Œï¼
```

#### **ä¿®å¤åï¼ˆâœ…ï¼‰**ï¼š
```python
# å®‰å…¨çš„å¤šç¯å¢ƒä½ç½®è·å–
tcp_pos = self.agent.tcp.pose.p
if tcp_pos.dim() > 1:
    if env_idx < tcp_pos.shape[0]:
        tcp_pos = tcp_pos[env_idx]
    else:
        tcp_pos = tcp_pos[0]  # å®‰å…¨å›é€€
        print(f"âš ï¸ ç¯å¢ƒ{env_idx}: TCPä½ç½®ç´¢å¼•è¶Šç•Œï¼Œä½¿ç”¨ç¯å¢ƒ0çš„ä½ç½®")

obj_pos = target_object.pose.p
if obj_pos.dim() > 1 and obj_pos.shape[0] > 1:
    # å¤šç¯å¢ƒç‰©ä½“ï¼ˆåˆå¹¶åçš„ç‰©ä½“ï¼‰
    if env_idx < obj_pos.shape[0]:
        obj_pos = obj_pos[env_idx]
    else:
        obj_pos = obj_pos[0]
        print(f"âš ï¸ ç¯å¢ƒ{env_idx}: ç‰©ä½“ä½ç½®ç´¢å¼•è¶Šç•Œï¼Œä½¿ç”¨ç¯å¢ƒ0çš„ä½ç½®")
else:
    # å•ç¯å¢ƒç‰©ä½“ï¼Œç›´æ¥ä½¿ç”¨ä½ç½®
    if obj_pos.dim() > 1:
        obj_pos = obj_pos[0]  # å–ç¬¬ä¸€ä¸ªï¼ˆä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªï¼‰ä½ç½®
```

### 2. **ç›¸å¯¹å¯¼å…¥ä¿®å¤**

#### **ä¿®å¤å‰ï¼ˆâŒï¼‰**ï¼š
```python
from .config import Config, get_config
```

#### **ä¿®å¤åï¼ˆâœ…ï¼‰**ï¼š
```python
try:
    from .config import Config, get_config
except ImportError:
    # å¤„ç†ç›´æ¥è¿è¡Œæ—¶çš„ç›¸å¯¹å¯¼å…¥é—®é¢˜
    from config import Config, get_config
```

### 3. **è·ç¦»è®¡ç®—æ ‡å‡†åŒ–**

#### **ä¿®å¤å‰ï¼ˆâŒï¼‰**ï¼š
```python
# ä¸åŒå‡½æ•°ä½¿ç”¨ä¸åŒçš„åŠå¾„ä¼°è®¡
distance = raw_distance - 0.05   # æ¥è§¦æ£€æµ‹
distance = raw_distance - 0.10   # æŠ“å–æˆåŠŸæ£€æµ‹
```

#### **ä¿®å¤åï¼ˆâœ…ï¼‰**ï¼š
```python
# ç»Ÿä¸€çš„åŠå¾„ä¼°è®¡æ ‡å‡†
estimated_radius = 0.1  # 10cmçš„åŠå¾„ä¼°è®¡ï¼Œæ‰€æœ‰å‡½æ•°ä¿æŒä¸€è‡´
distance = raw_distance - estimated_radius
```

## ğŸ“Š ä¿®å¤æ•ˆæœéªŒè¯

### âœ… æˆåŠŸè§£å†³çš„é—®é¢˜

1. **ç´¢å¼•è¶Šç•Œé—®é¢˜**ï¼š
   - ç¨‹åºä¸å†å´©æºƒ
   - å®‰å…¨å›é€€æœºåˆ¶æ­£å¸¸å·¥ä½œ
   - è­¦å‘Šä¿¡æ¯æ­£ç¡®æ˜¾ç¤º

2. **ç›¸å¯¹å¯¼å…¥é—®é¢˜**ï¼š
   - æ¨¡å—å¯ä»¥æ­£å¸¸å¯¼å…¥
   - æ”¯æŒåŒ…å†…å¯¼å…¥å’Œç›´æ¥è¿è¡Œ

3. **è·ç¦»è®¡ç®—ä¸€è‡´æ€§**ï¼š
   - æ‰€æœ‰ç›¸å…³å‡½æ•°ä½¿ç”¨ç»Ÿä¸€çš„åŠå¾„ä¼°è®¡
   - æ¥è§¦æ£€æµ‹å’ŒæŠ“å–æˆåŠŸæ£€æµ‹ä¿æŒä¸€è‡´

### ğŸ“ˆ æµ‹è¯•ç»“æœ

ä»æµ‹è¯•è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼š
- âœ… 4ä¸ªç¯å¢ƒå¹¶è¡Œè¿è¡Œæ­£å¸¸
- âœ… çŠ¶æ€æœºæ­£ç¡®æ‰§è¡Œå„ä¸ªé˜¶æ®µ
- âœ… å¸ç›˜çº¦æŸåˆ›å»ºå’Œç§»é™¤æˆåŠŸ
- âœ… ç¯å¢ƒ3æˆåŠŸå®Œæˆä¸€æ¬¡å®Œæ•´çš„æŠ“å–æµç¨‹

## ğŸ§  æ·±å±‚æŠ€æœ¯æ´å¯Ÿ

### 1. **å¤šç¯å¢ƒå¼ é‡ç»´åº¦çš„æœ¬è´¨**

åœ¨ManiSkillçš„å¤šç¯å¢ƒç³»ç»Ÿä¸­ï¼š
- **TCPä½ç½®**ï¼š`[num_envs, 3]` - å› ä¸ºæ¯ä¸ªç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªæœºæ¢°è‡‚
- **ç‰©ä½“ä½ç½®**ï¼š`[1, 3]` - å› ä¸ºæ¯ä¸ªç‰©ä½“åªå±äºä¸€ä¸ªç‰¹å®šç¯å¢ƒ
- **åˆå¹¶ç‰©ä½“ä½ç½®**ï¼š`[num_objects, 3]` - åˆå¹¶åçš„ç‰©ä½“é›†åˆ

### 2. **ç´¢å¼•æ˜ å°„çš„å¤æ‚æ€§**

```
ç¯å¢ƒç´¢å¼• (env_idx) â‰  å¼ é‡ç´¢å¼• (tensor_idx)
```

æ­£ç¡®çš„æ˜ å°„éœ€è¦ï¼š
1. æ£€æŸ¥å¼ é‡ç»´åº¦
2. éªŒè¯ç´¢å¼•æœ‰æ•ˆæ€§  
3. æä¾›å®‰å…¨å›é€€æœºåˆ¶

### 3. **é”™è¯¯å¤„ç†çš„å±‚æ¬¡**

1. **é¢„é˜²æ€§æ£€æŸ¥**ï¼šè¾¹ç•ŒéªŒè¯
2. **ä¼˜é›…é™çº§**ï¼šå®‰å…¨å›é€€
3. **ä¿¡æ¯åé¦ˆ**ï¼šè­¦å‘Šæ—¥å¿—
4. **ç³»ç»Ÿç¨³å®š**ï¼šä¸å´©æºƒç»§ç»­è¿è¡Œ

## ğŸ¯ æœ€ä½³å®è·µæ€»ç»“

### 1. **å¤šç¯å¢ƒç´¢å¼•è®¿é—®æ¨¡å¼**
```python
# æ ‡å‡†æ¨¡å¼
if tensor.dim() > 1 and env_idx < tensor.shape[0]:
    value = tensor[env_idx]
else:
    value = tensor[0]  # å®‰å…¨å›é€€
    # å¯é€‰ï¼šè®°å½•è­¦å‘Š
```

### 2. **å¯¼å…¥å¤„ç†æ¨¡å¼**
```python
# å…¼å®¹æ¨¡å¼
try:
    from .module import something  # åŒ…å†…å¯¼å…¥
except ImportError:
    from module import something   # ç›´æ¥å¯¼å…¥
```

### 3. **å‚æ•°ä¸€è‡´æ€§åŸåˆ™**
- ç›¸å…³å‡½æ•°ä½¿ç”¨ç»Ÿä¸€çš„å‚æ•°æ ‡å‡†
- é€šè¿‡å¸¸é‡æˆ–é…ç½®ç®¡ç†å‚æ•°
- æ·»åŠ æ¸…æ™°çš„æ³¨é‡Šè¯´æ˜

## ğŸš€ æ€§èƒ½å½±å“è¯„ä¼°

### âœ… æ­£é¢å½±å“
- **ç¨³å®šæ€§**ï¼šæ¶ˆé™¤äº†å´©æºƒé£é™©
- **å¯é æ€§**ï¼šå¢åŠ äº†é”™è¯¯æ¢å¤èƒ½åŠ›
- **å¯ç»´æŠ¤æ€§**ï¼šç»Ÿä¸€äº†ä»£ç æ ‡å‡†

### âš–ï¸ å¼€é”€è¯„ä¼°
- **è®¡ç®—å¼€é”€**ï¼šè¾¹ç•Œæ£€æŸ¥çš„é¢å¤–å¼€é”€å¯å¿½ç•¥ä¸è®¡
- **å†…å­˜å¼€é”€**ï¼šæ— é¢å¤–å†…å­˜ä½¿ç”¨
- **è¿è¡Œæ—¶å¼€é”€**ï¼šè­¦å‘Šæ—¥å¿—çš„I/Oå¼€é”€å¾ˆå°

## ğŸ“ åç»­æ”¹è¿›å»ºè®®

### 1. **è¿›ä¸€æ­¥ä¼˜åŒ–**
- è€ƒè™‘ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†æ‰€æœ‰è·ç¦»ç›¸å…³å‚æ•°
- æ·»åŠ æ›´è¯¦ç»†çš„è°ƒè¯•æ¨¡å¼æ§åˆ¶
- å®ç°æ›´æ™ºèƒ½çš„å¼ é‡ç»´åº¦è‡ªé€‚åº”

### 2. **ç›‘æ§å’Œæ—¥å¿—**
- ç»Ÿè®¡ç´¢å¼•è¶Šç•Œçš„é¢‘ç‡
- ç›‘æ§å®‰å…¨å›é€€çš„ä½¿ç”¨æƒ…å†µ
- ä¼˜åŒ–æ—¥å¿—è¾“å‡ºçš„æ€§èƒ½å½±å“

### 3. **æµ‹è¯•è¦†ç›–**
- æ·»åŠ è¾¹ç•Œæ¡ä»¶çš„å•å…ƒæµ‹è¯•
- å¢åŠ å¤šç¯å¢ƒåœºæ™¯çš„é›†æˆæµ‹è¯•
- éªŒè¯ä¸åŒé…ç½®ä¸‹çš„ç³»ç»Ÿè¡Œä¸º

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å½“å‰çš„é—®é¢˜ï¼Œè¿˜ä¸ºç³»ç»Ÿçš„é•¿æœŸç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§å¥ å®šäº†åšå®çš„åŸºç¡€ï¼

